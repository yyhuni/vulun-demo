{% extends "base.html" %}

{% block title %}å­˜å‚¨å‹ XSS{% endblock %}

{% block extra_style %}
body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
h1 { color: #e74c3c; }
input[type="text"], textarea { padding: 10px; width: 100%; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
button { padding: 10px 20px; background: #27ae60; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px; }
.message { background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 3px solid #3498db; }
.message .author { font-weight: bold; color: #333; }
.message .content { margin-top: 5px; }
.hint { background: #e8f4f8; padding: 10px; margin: 20px 0; border-radius: 5px; }
a { color: #3498db; }
.clear-btn { background: #e74c3c; }
{% endblock %}

{% block content %}
<h1>ğŸ’¬ å­˜å‚¨å‹ XSS æµ‹è¯• - ç•™è¨€æ¿</h1>
<p><a href="/xss">â† è¿”å›XSSé¶åœº</a></p>

<form method="POST" action="/xss/stored">
    <input type="text" name="author" placeholder="ä½ çš„æ˜µç§°" required><br><br>
    <textarea name="content" rows="3" placeholder="ç•™è¨€å†…å®¹" required></textarea>
    <button type="submit">å‘è¡¨ç•™è¨€</button>
</form>

<form method="POST" action="/xss/stored/clear" style="display:inline;">
    <button type="submit" class="clear-btn">æ¸…ç©ºç•™è¨€</button>
</form>

<h2>ğŸ“ ç•™è¨€åˆ—è¡¨</h2>
{% for msg in messages %}
<div class="message">
    <div class="author">{{ msg.author | safe }}</div>
    <div class="content">{{ msg.content | safe }}</div>
</div>
{% endfor %}

{% if not messages %}
<p style="color: #999;">æš‚æ— ç•™è¨€ï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡å§ï¼</p>
{% endif %}

<div class="hint">
    <strong>ğŸ’¡ æµ‹è¯•æç¤ºï¼š</strong><br>
    åœ¨æ˜µç§°æˆ–å†…å®¹ä¸­å°è¯•: <code>&lt;script&gt;alert('Stored XSS')&lt;/script&gt;</code><br>
    å­˜å‚¨å‹XSSä¼šå½±å“æ‰€æœ‰è®¿é—®è¯¥é¡µé¢çš„ç”¨æˆ·ï¼
</div>
{% endblock %}
